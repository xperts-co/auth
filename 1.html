<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotstar Video Player</title>
    <style>
        :root {
            --primary-color: #1f80e0;
            --controls-bg: linear-gradient(to top, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0));
            --icon-color: #ffffff;
            --text-color: #e0e0e0;
            --progress-bg: rgba(255, 255, 255, 0.3);
            --progress-buffered: rgba(255, 255, 255, 0.5);
        }

        /* Basic Setup */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #0c111b;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            color: var(--text-color);
        }

        /* Video Container */
        .video-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #video-player {
            width: 100%;
            height: 100%;
            object-fit: contain; /* Use 'cover' to fill screen, 'contain' to show full video */
            cursor: pointer;
        }

        /* Center Play/Pause Button */
        .center-play-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--icon-color);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            opacity: 1;
            transition: opacity 0.3s ease, transform 0.2s ease;
            z-index: 21;
        }

        .center-play-button:hover {
            transform: translate(-50%, -50%) scale(1.1);
        }

        .center-play-button svg {
            width: 40px;
            height: 40px;
            fill: var(--icon-color);
            pointer-events: none; /* Make sure it doesn't block clicks */
        }
        
        .center-play-button.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* Video Controls Container */
        .video-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 15px;
            background: var(--controls-bg);
            opacity: 1;
            transition: opacity 0.5s ease-in-out;
            z-index: 20;
        }

        .video-container.controls-hidden .video-controls {
            opacity: 0;
            pointer-events: none;
        }

        /* Progress Bar */
        .progress-bar-container {
            width: 100%;
            height: 15px; /* Taller for easier clicking */
            cursor: pointer;
            position: relative;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .progress-bar-wrapper {
            width: 100%;
            height: 5px;
            background: var(--progress-bg);
            border-radius: 5px;
            position: relative;
            overflow: hidden;
        }

        .buffered-bar, .progress-bar {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            border-radius: 5px;
            transition: width 0.1s linear;
        }
        
        .buffered-bar {
            background: var(--progress-buffered);
            width: 0;
        }

        .progress-bar {
            background: var(--primary-color);
            width: 0;
            z-index: 2;
        }
        
        /* Lower Controls (Buttons, Time) */
        .lower-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .controls-left, .controls-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .control-button {
            background: none;
            border: none;
            padding: 0;
            cursor: pointer;
            width: 28px;
            height: 28px;
        }
        
        .control-button svg {
            width: 100%;
            height: 100%;
            fill: var(--icon-color);
            transition: transform 0.2s ease;
        }

        .control-button:hover svg {
            transform: scale(1.15);
        }
        
        /* Animated Play/Pause SVG */
        #play-pause-svg .play-icon, #play-pause-svg .pause-icon {
            transition: d 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Volume Control */
        .volume-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .volume-slider-container {
            width: 0;
            height: 5px;
            background: var(--progress-bg);
            border-radius: 5px;
            cursor: pointer;
            transition: width 0.3s ease;
            overflow: hidden;
        }
        
        .volume-container:hover .volume-slider-container {
            width: 80px;
        }
        
        .volume-bar {
            height: 100%;
            background: var(--icon-color);
            border-radius: 5px;
            width: 100%; /* Default to full */
        }
        
        /* Animated Volume SVG */
        #volume-svg .volume-path, #volume-svg .mute-path {
             transition: d 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Time Display */
        .time-display {
            font-size: 14px;
            font-weight: 500;
        }
        
        /* Fallback message for missing URL */
        .error-message {
            display: none;
            text-align: center;
            padding: 20px;
            font-size: 1.2rem;
        }
    </style>
</head>
<body>

    <div class="video-container" id="video-container">
        <video id="video-player" playsinline></video>

        <div id="center-play-btn" class="center-play-button">
             <svg viewBox="0 0 24 24">
                <path d="M8 5v14l11-7z"></path>
            </svg>
        </div>
        
        <div class="error-message" id="error-message">
            <h2>Video Not Found</h2>
            <p>Please provide a valid video URL using the 'url' parameter.</p>
            <p>Example: <code>your_page.html?url=https://path/to/video.mp4</code></p>
        </div>

        <div class="video-controls" id="video-controls">
            <!-- Progress Bar -->
            <div class="progress-bar-container" id="progress-bar-container">
                <div class="progress-bar-wrapper">
                    <div class="buffered-bar" id="buffered-bar"></div>
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
            </div>

            <!-- Lower Controls -->
            <div class="lower-controls">
                <div class="controls-left">
                    <button class="control-button" id="play-pause-btn">
                        <!-- This SVG will be animated with JS -->
                        <svg id="play-pause-svg" viewBox="0 0 24 24">
                            <path class="play-icon" d="M8 5v14l11-7z"></path>
                            <path class="pause-icon" d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" style="display:none;"></path>
                        </svg>
                    </button>
                    
                    <div class="volume-container">
                        <button class="control-button" id="mute-btn">
                           <!-- This SVG will be animated with JS -->
                           <svg id="volume-svg" viewBox="0 0 24 24">
                                <path class="volume-path" d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path>
                                <path class="mute-path" d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z" style="display:none;"></path>
                           </svg>
                        </button>
                        <div class="volume-slider-container" id="volume-slider-container">
                            <div class="volume-bar" id="volume-bar"></div>
                        </div>
                    </div>

                    <div class="time-display" id="time-display">
                        00:00 / 00:00
                    </div>
                </div>
                <div class="controls-right">
                    <button class="control-button" id="settings-btn">
                        <svg viewBox="0 0 24 24">
                            <path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"></path>
                        </svg>
                    </button>
                    <button class="control-button" id="fullscreen-btn">
                        <svg viewBox="0 0 24 24">
                            <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // DOM Elements
            const videoContainer = document.getElementById('video-container');
            const video = document.getElementById('video-player');
            const errorMessage = document.getElementById('error-message');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const centerPlayBtn = document.getElementById('center-play-btn');
            
            // SVG Icon Paths for Animation
            const playIcon = playPauseBtn.querySelector('.play-icon');
            const pauseIcon = playPauseBtn.querySelector('.pause-icon');
            const playPath = "M8 5v14l11-7z";
            const pausePath = "M6 19h4V5H6v14zm8-14v14h4V5h-4z";

            const volumeBtn = document.getElementById('mute-btn');
            const volumeIcon = volumeBtn.querySelector('.volume-path');
            const muteIcon = volumeBtn.querySelector('.mute-path');
            const volumePath = "M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z";
            const mutePath = "M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z";

            const progressBarContainer = document.getElementById('progress-bar-container');
            const progressBar = document.getElementById('progress-bar');
            const bufferedBar = document.getElementById('buffered-bar');
            const timeDisplay = document.getElementById('time-display');
            const volumeSliderContainer = document.getElementById('volume-slider-container');
            const volumeBar = document.getElementById('volume-bar');
            const fullscreenBtn = document.getElementById('fullscreen-btn');

            let controlsTimeout;

            // --- URL Parameter Logic ---
            const urlParams = new URLSearchParams(window.location.search);
            const videoUrl = urlParams.get('url');

            if (videoUrl) {
                video.src = decodeURIComponent(videoUrl);
            } else {
                videoContainer.style.display = 'none';
                errorMessage.style.display = 'block';
                return; // Stop script execution if no URL
            }

            // --- Player Functions ---
            const togglePlay = () => {
                if (video.paused || video.ended) {
                    video.play();
                } else {
                    video.pause();
                }
            };

            const updatePlayPauseIcon = () => {
                if (video.paused || video.ended) {
                    playIcon.setAttribute('d', playPath);
                    centerPlayBtn.classList.remove('hidden');
                } else {
                    playIcon.setAttribute('d', pausePath);
                    centerPlayBtn.classList.add('hidden');
                }
            };
            
            const formatTime = (timeInSeconds) => {
                const result = new Date(timeInSeconds * 1000).toISOString().substr(11, 8);
                return {
                    minutes: result.substr(3, 2),
                    seconds: result.substr(6, 2),
                    hours: result.substr(0, 2),
                };
            };

            const updateTimeDisplay = () => {
                const currentTime = formatTime(video.currentTime);
                const duration = formatTime(video.duration);
                
                if(isNaN(video.duration)){
                    timeDisplay.textContent = `00:00 / 00:00`;
                    return;
                }

                if (video.duration >= 3600) {
                    timeDisplay.textContent = `${currentTime.hours}:${currentTime.minutes}:${currentTime.seconds} / ${duration.hours}:${duration.minutes}:${duration.seconds}`;
                } else {
                    timeDisplay.textContent = `${currentTime.minutes}:${currentTime.seconds} / ${duration.minutes}:${duration.seconds}`;
                }
            };
            
            const updateProgress = () => {
                const progressPercent = (video.currentTime / video.duration) * 100;
                progressBar.style.width = `${progressPercent}%`;

                if (video.buffered.length > 0) {
                    const bufferedEnd = video.buffered.end(video.buffered.length - 1);
                    const bufferedPercent = (bufferedEnd / video.duration) * 100;
                    bufferedBar.style.width = `${bufferedPercent}%`;
                }
            };
            
            const seek = (e) => {
                const rect = progressBarContainer.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                const width = progressBarContainer.clientWidth;
                const duration = video.duration;
                video.currentTime = (clickX / width) * duration;
            };

            const updateVolume = (e) => {
                const rect = volumeSliderContainer.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                let volume = clickX / volumeSliderContainer.clientWidth;
                volume = Math.max(0, Math.min(1, volume)); // Clamp between 0 and 1
                video.volume = volume;
                video.muted = false;
            };

            const updateVolumeBar = () => {
                const volume = video.muted ? 0 : video.volume;
                volumeBar.style.width = `${volume * 100}%`;
                if (video.muted || video.volume === 0) {
                    volumeIcon.setAttribute('d', mutePath);
                } else {
                    volumeIcon.setAttribute('d', volumePath);
                }
            };
            
            let lastVolume = 1;
            const toggleMute = () => {
                if (video.muted || video.volume === 0) {
                    video.muted = false;
                    video.volume = lastVolume > 0.1 ? lastVolume : 1;
                } else {
                    lastVolume = video.volume;
                    video.muted = true;
                    video.volume = 0;
                }
            };

            const toggleFullscreen = () => {
                if (!document.fullscreenElement) {
                    videoContainer.requestFullscreen().catch(err => {
                        alert(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
                    });
                } else {
                    document.exitFullscreen();
                }
            };

            const hideControls = () => {
                if (video.paused) return;
                videoContainer.classList.add('controls-hidden');
            };

            const showControls = () => {
                videoContainer.classList.remove('controls-hidden');
                clearTimeout(controlsTimeout);
                controlsTimeout = setTimeout(hideControls, 3000);
            };

            // --- Event Listeners ---
            video.addEventListener('play', updatePlayPauseIcon);
            video.addEventListener('pause', updatePlayPauseIcon);
            video.addEventListener('loadedmetadata', () => {
                updateTimeDisplay();
                updateProgress();
            });
            video.addEventListener('timeupdate', () => {
                updateTimeDisplay();
                updateProgress();
            });
            video.addEventListener('volumechange', updateVolumeBar);
            video.addEventListener('progress', updateProgress);
            
            playPauseBtn.addEventListener('click', togglePlay);
            centerPlayBtn.addEventListener('click', togglePlay);
            video.addEventListener('click', togglePlay);

            progressBarContainer.addEventListener('click', seek);
            
            volumeBtn.addEventListener('click', toggleMute);
            volumeSliderContainer.addEventListener('click', updateVolume);

            fullscreenBtn.addEventListener('click', toggleFullscreen);

            videoContainer.addEventListener('mousemove', showControls);
            videoContainer.addEventListener('mouseleave', hideControls);
            
            // Keyboard Shortcuts
            document.addEventListener('keydown', (e) => {
                switch (e.key.toLowerCase()) {
                    case ' ':
                        e.preventDefault();
                        togglePlay();
                        break;
                    case 'f':
                        toggleFullscreen();
                        break;
                    case 'm':
                        toggleMute();
                        break;
                    case 'arrowright':
                        video.currentTime += 5;
                        break;
                    case 'arrowleft':
                        video.currentTime -= 5;
                        break;
                }
            });
            
            // Initial state
            updatePlayPauseIcon();
            updateVolumeBar();
            showControls();
        });
    </script>
</body>
</html>
